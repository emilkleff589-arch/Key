--[[ 
    TITANIUM UI LIBRARY | GLOSS EDITION (V2.6.0)
    PREMIUM PRO-GRADE PERFORMANCE
    
    [ULTRA-POLISHED VISUALS]
    - Glossy Gradient Main Frame (0.08 Acrylic Base)
    - Specular Lighting & Inner Edge Strokes
    - Glass-Morphism Tab Design with Reflective Gradients
    - Professional Resize & Drag Logic
    - High-Fidelity Micro-Animations
]]

local Library = {
    Theme = {
        Main = Color3.fromRGB(15, 15, 15),
        Sidebar = Color3.fromRGB(20, 20, 20),
        Content = Color3.fromRGB(25, 25, 25),
        Stroke = Color3.fromRGB(60, 60, 60),
        LightStroke = Color3.fromRGB(100, 100, 100), -- Specular highlight
        Text = Color3.fromRGB(255, 255, 255),
        SubText = Color3.fromRGB(180, 180, 180),
        Accent = Color3.fromRGB(0, 140, 255),
        Gloss = Color3.fromRGB(255, 255, 255)
    },
    CurrentTab = nil,
    IsResizing = false,
    Dragging = false
}

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")
local Players = game:GetService("Players")
local Mouse = Players.LocalPlayer:GetMouse()

local Viewport = (gethui and gethui()) or CoreGui

--// UTILS
local function Tween(obj, props, time, style, dir)
    local info = TweenInfo.new(time or 0.4, style or Enum.EasingStyle.Quint, dir or Enum.EasingDirection.Out)
    local t = TweenService:Create(obj, info, props)
    t:Play()
    return t
end

local function MakeDraggable(top, main)
    local dragStart, startPos
    top.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            Library.Dragging = true
            dragStart = input.Position
            startPos = main.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then Library.Dragging = false end
            end)
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement and Library.Dragging then
            local delta = input.Position - dragStart
            main.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
end

local function MakeResizable(main, handle)
    local dragStart, startSize
    handle.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            Library.IsResizing = true
            dragStart = input.Position
            startSize = main.Size
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then Library.IsResizing = false end
            end)
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement and Library.IsResizing then
            local delta = input.Position - dragStart
            main.Size = UDim2.new(0, math.clamp(startSize.X.Offset + delta.X, 550, 1200), 0, math.clamp(startSize.Y.Offset + delta.Y, 350, 800))
        end
    end)
end

function Library:CreateWindow(cfg)
    cfg = cfg or {}
    local ScreenGui = Instance.new("ScreenGui", Viewport)
    ScreenGui.Name = "Titanium_Gloss_V2.6"
    ScreenGui.ResetOnSpawn = false

    --// MAIN FRAME (GLOSSY ACRYLIC)
    local Main = Instance.new("Frame", ScreenGui)
    Main.Name = "Main"
    Main.BackgroundColor3 = Library.Theme.Main
    Main.BackgroundTransparency = 0.08
    Main.Position = UDim2.new(0.5, -325, 0.5, -225)
    Main.Size = UDim2.new(0, 650, 0, 450)
    
    local MainCorner = Instance.new("UICorner", Main)
    MainCorner.CornerRadius = UDim.new(0, 12)
    
    -- Sublte Gradient for "Glass" Lighting
    local MainGradient = Instance.new("UIGradient", Main)
    MainGradient.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, Color3.fromRGB(40, 40, 40)),
        ColorSequenceKeypoint.new(0.2, Library.Theme.Main),
        ColorSequenceKeypoint.new(1, Library.Theme.Main)
    })
    MainGradient.Rotation = 45

    local MainStroke = Instance.new("UIStroke", Main)
    MainStroke.Color = Library.Theme.LightStroke
    MainStroke.Thickness = 1.2
    MainStroke.Transparency = 0.5
    
    local MainStrokeGradient = Instance.new("UIGradient", MainStroke)
    MainStrokeGradient.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 255)), -- Specular Light top-left
        ColorSequenceKeypoint.new(0.4, Color3.fromRGB(60, 60, 60)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 20, 20))
    })
    MainStrokeGradient.Rotation = 45

    --// TOP BAR
    local TopBar = Instance.new("Frame", Main)
    TopBar.Name = "TopBar"
    TopBar.Size = UDim2.new(1, 0, 0, 45)
    TopBar.BackgroundTransparency = 1
    
    local Title = Instance.new("TextLabel", TopBar)
    Title.Text = cfg.Name or "TITANIUM"
    Title.Font = Enum.Font.GothamBold
    Title.TextColor3 = Library.Theme.Text
    Title.TextSize = 15
    Title.Position = UDim2.new(0, 20, 0, 0)
    Title.Size = UDim2.new(0, 200, 1, 0)
    Title.BackgroundTransparency = 1
    Title.TextXAlignment = Enum.TextXAlignment.Left

    --// SIDEBAR
    local Sidebar = Instance.new("Frame", Main)
    Sidebar.Name = "Sidebar"
    Sidebar.BackgroundColor3 = Library.Theme.Sidebar
    Sidebar.BackgroundTransparency = 0.4
    Sidebar.Position = UDim2.new(0, 10, 0, 50)
    Sidebar.Size = UDim2.new(0, 165, 1, -60)
    Instance.new("UICorner", Sidebar).CornerRadius = UDim.new(0, 10)
    
    local SidebarStroke = Instance.new("UIStroke", Sidebar)
    SidebarStroke.Color = Library.Theme.Stroke
    SidebarStroke.Thickness = 1
    SidebarStroke.Transparency = 0.6

    local TabContainer = Instance.new("ScrollingFrame", Sidebar)
    TabContainer.Size = UDim2.new(1, 0, 1, -10)
    TabContainer.Position = UDim2.new(0, 0, 0, 5)
    TabContainer.BackgroundTransparency = 1
    TabContainer.ScrollBarThickness = 0
    
    local TLayout = Instance.new("UIListLayout", TabContainer)
    TLayout.Padding = UDim.new(0, 6)
    Instance.new("UIPadding", TabContainer).PaddingLeft = UDim.new(0, 10)
    Instance.new("UIPadding", TabContainer).PaddingRight = UDim.new(0, 10)

    --// CONTENT AREA
    local ContentArea = Instance.new("Frame", Main)
    ContentArea.Name = "ContentArea"
    ContentArea.Position = UDim2.new(0, 185, 0, 50)
    ContentArea.Size = UDim2.new(1, -195, 1, -60)
    ContentArea.BackgroundTransparency = 1

    --// RESIZE HANDLE (STYLIZED)
    local ResizeBtn = Instance.new("ImageButton", Main)
    ResizeBtn.Name = "ResizeHandle"
    ResizeBtn.Size = UDim2.new(0, 16, 0, 16)
    ResizeBtn.Position = UDim2.new(1, -16, 1, -16)
    ResizeBtn.BackgroundTransparency = 1
    ResizeBtn.Image = "rbxassetid://6031289116"
    ResizeBtn.ImageColor3 = Library.Theme.Accent
    ResizeBtn.ZIndex = 10

    MakeDraggable(TopBar, Main)
    MakeResizable(Main, ResizeBtn)

    local Window = {}
    local Tabs = {}

    function Window:CreateTab(tcfg)
        local TabBtn = Instance.new("TextButton", TabContainer)
        TabBtn.Size = UDim2.new(1, 0, 0, 36)
        TabBtn.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        TabBtn.BackgroundTransparency = 1 -- Default hidden
        TabBtn.Text = ""
        TabBtn.AutoButtonColor = false
        
        local TCorner = Instance.new("UICorner", TabBtn)
        TCorner.CornerRadius = UDim.new(0, 8)

        -- GLOSSY BUTTON GRADIENT
        local TGloss = Instance.new("UIGradient", TabBtn)
        TGloss.Color = ColorSequence.new({
            ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 255)),
            ColorSequenceKeypoint.new(0.5, Color3.fromRGB(150, 150, 150)),
            ColorSequenceKeypoint.new(1, Color3.fromRGB(100, 100, 100))
        })
        TGloss.Rotation = 90
        TGloss.Transparency = NumberSequence.new(0.9) -- Subtle gloss overlay

        local TStroke = Instance.new("UIStroke", TabBtn)
        TStroke.Color = Color3.fromRGB(255, 255, 255)
        TStroke.Thickness = 1
        TStroke.Transparency = 1 -- Animate this
        TStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

        local TText = Instance.new("TextLabel", TabBtn)
        TText.Position = UDim2.new(0, 35, 0, 0)
        TText.Size = UDim2.new(1, -40, 1, 0)
        TText.Text = tcfg.Name
        TText.Font = Enum.Font.GothamMedium
        TText.TextSize = 13
        TText.TextColor3 = Library.Theme.SubText
        TText.BackgroundTransparency = 1
        TText.TextXAlignment = Enum.TextXAlignment.Left

        local TIcon = Instance.new("ImageLabel", TabBtn)
        TIcon.Size = UDim2.new(0, 18, 0, 18)
        TIcon.Position = UDim2.new(0, 8, 0.5, -9)
        TIcon.BackgroundTransparency = 1
        TIcon.Image = "rbxassetid://6026568198"
        TIcon.ImageColor3 = Library.Theme.SubText

        local Page = Instance.new("ScrollingFrame", ContentArea)
        Page.Size = UDim2.new(1, 0, 1, 0)
        Page.BackgroundTransparency = 1
        Page.Visible = false
        Page.ScrollBarThickness = 0
        
        local PLayout = Instance.new("UIListLayout", Page)
        PLayout.Padding = UDim.new(0, 12)

        local function SelectTab()
            for _, v in pairs(Tabs) do
                v.Page.Visible = false
                Tween(v.Btn, {BackgroundTransparency = 1}, 0.3)
                Tween(v.Stroke, {Transparency = 1}, 0.3)
                Tween(v.Text, {TextColor3 = Library.Theme.SubText}, 0.3)
                Tween(v.Icon, {ImageColor3 = Library.Theme.SubText, Position = UDim2.new(0, 8, 0.5, -9)}, 0.3)
            end
            
            Page.Visible = true
            Tween(TabBtn, {BackgroundTransparency = 0.9}, 0.3)
            Tween(TStroke, {Transparency = 0.7}, 0.3)
            Tween(TText, {TextColor3 = Library.Theme.Text}, 0.3)
            Tween(TIcon, {ImageColor3 = Library.Theme.Accent, Position = UDim2.new(0, 10, 0.5, -9)}, 0.4, Enum.EasingStyle.Back)
            
            -- Bounce Click Effect
            TabBtn.Size = UDim2.new(1, -4, 0, 34)
            Tween(TabBtn, {Size = UDim2.new(1, 0, 0, 36)}, 0.5, Enum.EasingStyle.Elastic)
        end

        TabBtn.MouseButton1Click:Connect(SelectTab)
        
        table.insert(Tabs, {Btn = TabBtn, Page = Page, Text = TText, Icon = TIcon, Stroke = TStroke})
        if #Tabs == 1 then SelectTab() end

        local Section = {}
        function Section:CreateSection(sname)
            local SFrame = Instance.new("Frame", Page)
            SFrame.Size = UDim2.new(1, -5, 0, 40)
            SFrame.BackgroundColor3 = Library.Theme.Main
            SFrame.BackgroundTransparency = 0.6
            Instance.new("UICorner", SFrame).CornerRadius = UDim.new(0, 10)
            
            local SStroke = Instance.new("UIStroke", SFrame)
            SStroke.Color = Library.Theme.Stroke
            SStroke.Transparency = 0.7

            local STitle = Instance.new("TextLabel", SFrame)
            STitle.Text = sname:upper()
            STitle.Font = Enum.Font.GothamBold
            STitle.TextSize = 11
            STitle.TextColor3 = Library.Theme.Accent
            STitle.Position = UDim2.new(0, 15, 0, 12)
            STitle.BackgroundTransparency = 1
            STitle.Size = UDim2.new(1, -30, 0, 15)
            STitle.TextXAlignment = Enum.TextXAlignment.Left

            local Container = Instance.new("Frame", SFrame)
            Container.Position = UDim2.new(0, 10, 0, 38)
            Container.Size = UDim2.new(1, -20, 0, 0)
            Container.BackgroundTransparency = 1
            
            local CLayout = Instance.new("UIListLayout", Container)
            CLayout.Padding = UDim.new(0, 8)
            
            CLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
                SFrame.Size = UDim2.new(1, -5, 0, CLayout.AbsoluteContentSize.Y + 50)
                Page.CanvasSize = UDim2.new(0,0,0, PLayout.AbsoluteContentSize.Y + 20)
            end)

            local Elements = {}

            function Elements:CreateButton(bcfg)
                local Btn = Instance.new("TextButton", Container)
                Btn.Size = UDim2.new(1, 0, 0, 34)
                Btn.BackgroundColor3 = Library.Theme.Content
                Btn.Font = Enum.Font.GothamMedium
                Btn.Text = bcfg.Name
                Btn.TextColor3 = Library.Theme.Text
                Btn.TextSize = 12
                Btn.AutoButtonColor = false
                Instance.new("UICorner", Btn).CornerRadius = UDim.new(0, 8)
                
                local BStroke = Instance.new("UIStroke", Btn)
                BStroke.Color = Color3.fromRGB(255, 255, 255)
                BStroke.Transparency = 0.9

                Btn.MouseEnter:Connect(function() Tween(BStroke, {Transparency = 0.7}, 0.3) end)
                Btn.MouseLeave:Connect(function() Tween(BStroke, {Transparency = 0.9}, 0.3) end)
                
                Btn.MouseButton1Click:Connect(function()
                    bcfg.Callback()
                    Btn.Size = UDim2.new(1, -4, 0, 32)
                    Tween(Btn, {Size = UDim2.new(1, 0, 0, 34)}, 0.4, Enum.EasingStyle.Back)
                end)
            end

            function Elements:CreateToggle(tcfg)
                local Tog = Instance.new("TextButton", Container)
                Tog.Size = UDim2.new(1, 0, 0, 34)
                Tog.BackgroundColor3 = Library.Theme.Content
                Tog.Text = ""
                Tog.AutoButtonColor = false
                Instance.new("UICorner", Tog).CornerRadius = UDim.new(0, 8)
                
                local Label = Instance.new("TextLabel", Tog)
                Label.Text = tcfg.Name
                Label.Position = UDim2.new(0, 12, 0, 0)
                Label.Size = UDim2.new(1, -60, 1, 0)
                Label.Font = Enum.Font.Gotham
                Label.TextColor3 = Library.Theme.Text
                Label.TextSize = 12
                Label.BackgroundTransparency = 1
                Label.TextXAlignment = Enum.TextXAlignment.Left

                local Box = Instance.new("Frame", Tog)
                Box.Size = UDim2.new(0, 36, 0, 20)
                Box.Position = UDim2.new(1, -48, 0.5, -10)
                Box.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
                Instance.new("UICorner", Box).CornerRadius = UDim.new(1, 0)
                
                local Dot = Instance.new("Frame", Box)
                Dot.Size = UDim2.new(0, 16, 0, 16)
                Dot.Position = UDim2.new(0, 2, 0.5, -8)
                Dot.BackgroundColor3 = Color3.new(1, 1, 1)
                Instance.new("UICorner", Dot).CornerRadius = UDim.new(1, 0)

                local enabled = tcfg.CurrentValue or false
                local function update()
                    Tween(Box, {BackgroundColor3 = enabled and Library.Theme.Accent or Color3.fromRGB(45, 45, 45)}, 0.3)
                    Tween(Dot, {Position = enabled and UDim2.new(1, -18, 0.5, -8) or UDim2.new(0, 2, 0.5, -8)}, 0.4, Enum.EasingStyle.Back)
                    tcfg.Callback(enabled)
                end
                Tog.MouseButton1Click:Connect(function() enabled = not enabled update() end)
                update()
            end

            return Elements
        end
        return Section
    end

    function Library:Notify(ncfg)
        local N = Instance.new("Frame", ScreenGui)
        N.Size = UDim2.new(0, 280, 0, 70)
        N.Position = UDim2.new(1, 20, 1, -100)
        N.BackgroundColor3 = Library.Theme.Main
        N.BackgroundTransparency = 0.1
        Instance.new("UICorner", N).CornerRadius = UDim.new(0, 10)
        
        local NS = Instance.new("UIStroke", N)
        NS.Color = Library.Theme.Accent
        NS.Thickness = 1.5

        local NG = Instance.new("UIGradient", N)
        NG.Color = ColorSequence.new({
            ColorSequenceKeypoint.new(0, Color3.fromRGB(255,255,255)),
            ColorSequenceKeypoint.new(1, Library.Theme.Main)
        })
        NG.Rotation = 45

        local NT = Instance.new("TextLabel", N)
        NT.Text = ncfg.Title:upper()
        NT.Font = Enum.Font.GothamBold
        NT.TextColor3 = Library.Theme.Accent
        NT.Position = UDim2.new(0, 15, 0, 15)
        NT.BackgroundTransparency = 1
        NT.TextSize = 14
        NT.TextXAlignment = Enum.TextXAlignment.Left

        local NC = Instance.new("TextLabel", N)
        NC.Text = ncfg.Content
        NC.Font = Enum.Font.Gotham
        NC.TextColor3 = Library.Theme.Text
        NC.Position = UDim2.new(0, 15, 0, 35)
        NC.Size = UDim2.new(1, -30, 0, 25)
        NC.BackgroundTransparency = 1
        NC.TextSize = 12
        NC.TextXAlignment = Enum.TextXAlignment.Left
        NC.TextWrapped = true

        Tween(N, {Position = UDim2.new(1, -300, 1, -100)}, 0.6, Enum.EasingStyle.Back)
        task.delay(ncfg.Duration or 3, function()
            Tween(N, {Position = UDim2.new(1, 20, 1, -100)}, 0.6, Enum.EasingStyle.Back)
            task.wait(0.6) N:Destroy()
        end)
    end

    return Window
end

return Library
